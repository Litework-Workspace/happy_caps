{% assign collection_index = 0 %}
<div class="collections-items {% if section.settings.collection_titles == 'visible-on-mouse-over' %}interactive{% endif %}">
  {% if linklists[list_name].links.size > 0 %}
    {% for link in linklists[list_name].links %}
      {% assign collection = link.object %}
      {% render 'collections-item', collection: collection, collection_count: collection_count, collection_index: collection_index %}
      {% assign collection_index = collection_index | plus: 1 %}
    {% endfor %}
  {% else %}
    {% for collection in collections %}
      {% unless collection.handle == 'frontpage' or collection.handle == 'all' %}
        {% render 'collections-item', collection: collection, collection_count: collection_count, collection_index: collection_index %}
        {% assign collection_index = collection_index | plus: 1 %}
      {% endunless %}
    {% endfor %}
  {% endif %}
</div>